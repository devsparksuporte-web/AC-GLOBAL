import{c as e,i as t,o as n,r,t as i}from"./index-C9yBzEdM.js";import{t as a}from"./ClientePortal-DLC5WvNi.js";import{t as o}from"./weatherService-CZMQaj8j.js";var s=e(n(),1),c=r(),l=()=>(0,c.jsxs)(`svg`,{width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,c.jsx)(`path`,{d:`M20 7L4 7`}),(0,c.jsx)(`path`,{d:`M20 12L4 12`}),(0,c.jsx)(`path`,{d:`M20 17L4 17`})]}),u=()=>(0,c.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,c.jsx)(`rect`,{x:`3`,y:`4`,width:`18`,height:`18`,rx:`2`,ry:`2`}),(0,c.jsx)(`line`,{x1:`16`,y1:`2`,x2:`16`,y2:`6`}),(0,c.jsx)(`line`,{x1:`8`,y1:`2`,x2:`8`,y2:`6`}),(0,c.jsx)(`line`,{x1:`3`,y1:`10`,x2:`21`,y2:`10`})]});function d(){let{userProfile:e}=i(),[n,r]=(0,s.useState)([]),[d,f]=(0,s.useState)([]),[p,m]=(0,s.useState)(null),[h,g]=(0,s.useState)([]),[_,v]=(0,s.useState)(!0),y=t();return(0,s.useEffect)(()=>{(async()=>{try{let[t,n]=await Promise.all([a.getMeusEquipamentos(),a.getHistoricoServicos()]);r(t),f(n);let i=e?.latitude||-23.5505,s=e?.longitude||-46.6333,c=await o.getWeather(i,s);m(c),g(o.getAlerts(c))}catch(e){console.error(`Erro ao carregar dashboard do cliente:`,e)}finally{v(!1)}})()},[e]),_?(0,c.jsx)(`div`,{className:`client-loading`,children:`Carregando seus dados...`}):(0,c.jsxs)(`div`,{className:`cliente-dashboard`,children:[(0,c.jsxs)(`header`,{className:`client-header`,children:[(0,c.jsxs)(`div`,{children:[(0,c.jsxs)(`h1`,{children:[`OlÃ¡, `,e?.nome,`!`]}),(0,c.jsx)(`p`,{children:`Bem-vindo ao seu portal de suporte tÃ©cnico.`})]}),(0,c.jsxs)(`button`,{className:`btn-primary`,onClick:()=>y(`/portal/agendar`),children:[(0,c.jsx)(u,{}),` Agendar Novo ServiÃ§o`]})]}),h.length>0&&(0,c.jsx)(`div`,{className:`client-alerts`,children:h.map((e,t)=>(0,c.jsxs)(`div`,{className:`client-alert-card ${e.type}`,children:[(0,c.jsx)(`div`,{className:`alert-icon`,children:`âš ï¸`}),(0,c.jsxs)(`div`,{className:`alert-content`,children:[(0,c.jsx)(`h3`,{children:e.title}),(0,c.jsx)(`p`,{children:e.description}),(0,c.jsx)(`button`,{className:`btn-alert-action`,onClick:()=>y(`/portal/agendar`),children:`Proteger Equipamentos Agora`})]})]},t))}),(0,c.jsxs)(`div`,{className:`client-grid`,children:[(0,c.jsxs)(`section`,{className:`client-section`,children:[(0,c.jsxs)(`div`,{className:`section-header`,children:[(0,c.jsx)(`h2`,{children:`Meus Equipamentos`}),(0,c.jsxs)(`span`,{className:`badge`,children:[n.length,` unidades`]})]}),(0,c.jsx)(`div`,{className:`equipment-list`,children:n.length===0?(0,c.jsx)(`p`,{className:`empty-state`,children:`Nenhum equipamento cadastrado.`}):n.map(e=>(0,c.jsxs)(`div`,{className:`equipment-card`,children:[(0,c.jsx)(`div`,{className:`eq-icon`,children:(0,c.jsx)(l,{})}),(0,c.jsxs)(`div`,{className:`eq-info`,children:[(0,c.jsx)(`h3`,{children:e.nome}),(0,c.jsxs)(`p`,{children:[e.marca,` `,e.modelo,` - `,e.capacidade]}),(0,c.jsxs)(`div`,{className:`eq-meta`,children:[(0,c.jsxs)(`span`,{children:[`ðŸ“ `,e.localizacao]}),e.proxima_revisao&&(0,c.jsxs)(`span`,{className:`revisao`,children:[`ðŸ“… PrÃ³xima: `,new Date(e.proxima_revisao).toLocaleDateString()]})]})]})]},e.id))})]}),(0,c.jsxs)(`section`,{className:`client-section`,children:[(0,c.jsx)(`div`,{className:`section-header`,children:(0,c.jsx)(`h2`,{children:`HistÃ³rico de ServiÃ§os`})}),(0,c.jsx)(`div`,{className:`history-list`,children:d.length===0?(0,c.jsx)(`p`,{className:`empty-state`,children:`Nenhum serviÃ§o registrado.`}):d.map(e=>(0,c.jsxs)(`div`,{className:`history-card`,children:[(0,c.jsx)(`div`,{className:`history-date`,children:new Date(e.created_at).toLocaleDateString(`pt-BR`,{day:`2-digit`,month:`short`})}),(0,c.jsxs)(`div`,{className:`history-info`,children:[(0,c.jsx)(`h3`,{children:e.equipamento||`ServiÃ§o Geral`}),(0,c.jsx)(`p`,{children:e.descricao}),(0,c.jsx)(`span`,{className:`status-badge ${e.status}`,children:e.status.replace(`_`,` `)})]})]},e.id))})]})]}),p&&(0,c.jsxs)(`div`,{className:`client-weather-widget`,children:[(0,c.jsxs)(`div`,{className:`weather-main`,children:[(0,c.jsxs)(`span`,{className:`temp`,children:[Math.round(p.temperature),`Â°C`]}),(0,c.jsx)(`span`,{className:`cond`,children:p.condition})]}),(0,c.jsx)(`div`,{className:`weather-forecast`,children:p.forecast.slice(1,5).map((e,t)=>(0,c.jsxs)(`div`,{className:`forecast-day`,children:[(0,c.jsx)(`span`,{children:new Date(e.date).toLocaleDateString(`pt-BR`,{weekday:`short`})}),(0,c.jsxs)(`strong`,{children:[Math.round(e.maxTemp),`Â°`]})]},t))})]})]})}export{d as default};