import{c as e,n as t,o as n,r,t as i}from"./index-C9yBzEdM.js";/* empty css                 */var a=e(n(),1);const o={async listarGarantias(e){let{data:n,error:r}=await t.from(`garantias_equipamentos`).select(`*`).eq(`empresa_id`,e).order(`data_vencimento_garantia`,{ascending:!0});if(r)throw r;return n||[]},async criarGarantia(e){let{data:n,error:r}=await t.from(`garantias_equipamentos`).insert(e).select().single();if(r)throw r;return n},async listarManuais(e){let{data:n,error:r}=await t.from(`manuais_tecnicos`).select(`*`).eq(`empresa_id`,e).order(`fabricante`,{ascending:!0});if(r)throw r;return n||[]},async criarManual(e){let{data:n,error:r}=await t.from(`manuais_tecnicos`).insert(e).select().single();if(r)throw r;return n},async listarCotacoes(e){let{data:n,error:r}=await t.from(`cotacoes`).select(`*, solicitante:perfis!solicitante_id(nome), itens:itens_cotacao(*, respostas:respostas_cotacao(*))`).eq(`empresa_id`,e).order(`created_at`,{ascending:!1});if(r)throw r;return n||[]},async criarCotacao(e,n){let{data:{user:r}}=await t.auth.getUser();if(!r)throw Error(`UsuÃ¡rio nÃ£o autenticado`);let{data:i,error:a}=await t.from(`cotacoes`).insert({...e,solicitante_id:r.id}).select().single();if(a)throw a;if(n.length>0){let e=n.map(e=>({...e,cotacao_id:i.id}));await t.from(`itens_cotacao`).insert(e)}return i},async adicionarRespostaCotacao(e){let{data:n,error:r}=await t.from(`respostas_cotacao`).insert(e).select().single();if(r)throw r;return n},async atualizarStatusCotacao(e,n){let{error:r}=await t.from(`cotacoes`).update({status:n}).eq(`id`,e);if(r)throw r},async listarPedidos(e){let{data:n,error:r}=await t.from(`pedidos_fornecedor`).select(`*`).eq(`empresa_id`,e).order(`created_at`,{ascending:!1});if(r)throw r;return n||[]},async criarPedido(e){let{data:n,error:r}=await t.from(`pedidos_fornecedor`).insert(e).select().single();if(r)throw r;return n},async atualizarPedido(e,n){let{data:r,error:i}=await t.from(`pedidos_fornecedor`).update(n).eq(`id`,e).select().single();if(i)throw i;return r}};var s=r(),c=()=>(0,s.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,s.jsx)(`line`,{x1:`12`,y1:`5`,x2:`12`,y2:`19`}),(0,s.jsx)(`line`,{x1:`5`,y1:`12`,x2:`19`,y2:`12`})]}),l=()=>(0,s.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,s.jsx)(`line`,{x1:`18`,y1:`6`,x2:`6`,y2:`18`}),(0,s.jsx)(`line`,{x1:`6`,y1:`6`,x2:`18`,y2:`18`})]}),u=()=>(0,s.jsxs)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,s.jsx)(`path`,{d:`M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z`}),(0,s.jsx)(`polyline`,{points:`3.27 6.96 12 12.01 20.73 6.96`}),(0,s.jsx)(`line`,{x1:`12`,y1:`22.08`,x2:`12`,y2:`12`})]});function d({empresaId:e,onClose:t,onSave:n}){let[r,i]=(0,a.useState)({fabricante:``,modelo:``,numero_serie:``,data_compra:``,data_vencimento_garantia:``,tipo_garantia:`padrao`,observacoes:``}),[c,u]=(0,a.useState)(!1),[d,f]=(0,a.useState)(``);return(0,s.jsx)(`div`,{className:`modal-overlay`,onClick:t,children:(0,s.jsxs)(`div`,{className:`modal-content`,onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)(`div`,{className:`modal-header`,children:[(0,s.jsx)(`h2`,{className:`modal-title`,children:`Nova Garantia`}),(0,s.jsx)(`button`,{className:`modal-close`,onClick:t,children:(0,s.jsx)(l,{})})]}),(0,s.jsxs)(`form`,{onSubmit:async t=>{t.preventDefault(),u(!0),f(``);try{await o.criarGarantia({...r,empresa_id:e,status:`ativa`}),n()}catch{f(`Erro ao registrar garantia.`)}finally{u(!1)}},children:[(0,s.jsxs)(`div`,{className:`modal-body`,children:[d&&(0,s.jsx)(`div`,{className:`error-message`,children:d}),(0,s.jsxs)(`div`,{className:`form-row`,children:[(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`Fabricante *`}),(0,s.jsx)(`input`,{className:`form-input`,value:r.fabricante,onChange:e=>i({...r,fabricante:e.target.value}),required:!0})]}),(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`Modelo *`}),(0,s.jsx)(`input`,{className:`form-input`,value:r.modelo,onChange:e=>i({...r,modelo:e.target.value}),required:!0})]})]}),(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`NÂº SÃ©rie`}),(0,s.jsx)(`input`,{className:`form-input`,value:r.numero_serie,onChange:e=>i({...r,numero_serie:e.target.value})})]}),(0,s.jsxs)(`div`,{className:`form-row`,children:[(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`Data da Compra`}),(0,s.jsx)(`input`,{className:`form-input`,type:`date`,value:r.data_compra,onChange:e=>i({...r,data_compra:e.target.value})})]}),(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`Vencimento Garantia *`}),(0,s.jsx)(`input`,{className:`form-input`,type:`date`,value:r.data_vencimento_garantia,onChange:e=>i({...r,data_vencimento_garantia:e.target.value}),required:!0})]})]}),(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`Tipo`}),(0,s.jsxs)(`select`,{className:`form-select`,value:r.tipo_garantia,onChange:e=>i({...r,tipo_garantia:e.target.value}),children:[(0,s.jsx)(`option`,{value:`padrao`,children:`PadrÃ£o`}),(0,s.jsx)(`option`,{value:`estendida`,children:`Estendida`}),(0,s.jsx)(`option`,{value:`contratual`,children:`Contratual`})]})]}),(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`ObservaÃ§Ãµes`}),(0,s.jsx)(`textarea`,{className:`form-input`,rows:2,value:r.observacoes,onChange:e=>i({...r,observacoes:e.target.value})})]})]}),(0,s.jsxs)(`div`,{className:`modal-footer`,children:[(0,s.jsx)(`button`,{type:`button`,className:`btn-secondary`,onClick:t,children:`Cancelar`}),(0,s.jsx)(`button`,{type:`submit`,className:`btn-primary`,disabled:c,children:c?`Salvando...`:`Registrar`})]})]})]})})}function f({empresaId:e,onClose:t,onSave:n}){let[r,i]=(0,a.useState)(``),[c,u]=(0,a.useState)(``),[d,f]=(0,a.useState)(``),[p,m]=(0,a.useState)([{descricao_peca:``,quantidade:1,unidade:`un`}]),[h,g]=(0,a.useState)(!1),[_,v]=(0,a.useState)(``),y=()=>m([...p,{descricao_peca:``,quantidade:1,unidade:`un`}]),b=e=>m(p.filter((t,n)=>n!==e));return(0,s.jsx)(`div`,{className:`modal-overlay`,onClick:t,children:(0,s.jsxs)(`div`,{className:`modal-content`,onClick:e=>e.stopPropagation(),style:{maxWidth:`600px`},children:[(0,s.jsxs)(`div`,{className:`modal-header`,children:[(0,s.jsx)(`h2`,{className:`modal-title`,children:`Nova CotaÃ§Ã£o`}),(0,s.jsx)(`button`,{className:`modal-close`,onClick:t,children:(0,s.jsx)(l,{})})]}),(0,s.jsxs)(`form`,{onSubmit:async t=>{if(t.preventDefault(),p.some(e=>!e.descricao_peca.trim())){v(`Preencha todas as peÃ§as.`);return}g(!0),v(``);try{await o.criarCotacao({empresa_id:e,titulo:r,descricao:c,data_limite:d||void 0},p),n()}catch{v(`Erro ao criar cotaÃ§Ã£o.`)}finally{g(!1)}},children:[(0,s.jsxs)(`div`,{className:`modal-body`,children:[_&&(0,s.jsx)(`div`,{className:`error-message`,children:_}),(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`TÃ­tulo *`}),(0,s.jsx)(`input`,{className:`form-input`,value:r,onChange:e=>i(e.target.value),placeholder:`Ex: Compressor 12000 BTU`,required:!0})]}),(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`DescriÃ§Ã£o`}),(0,s.jsx)(`textarea`,{className:`form-input`,rows:2,value:c,onChange:e=>u(e.target.value)})]}),(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`Data Limite`}),(0,s.jsx)(`input`,{className:`form-input`,type:`date`,value:d,onChange:e=>f(e.target.value)})]}),(0,s.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`0.5rem`},children:[(0,s.jsx)(`label`,{className:`form-label`,style:{margin:0},children:`PeÃ§as Solicitadas`}),(0,s.jsx)(`button`,{type:`button`,className:`btn-secondary`,onClick:y,style:{padding:`0.3rem 0.8rem`,fontSize:`0.8rem`},children:`+ PeÃ§a`})]}),p.map((e,t)=>(0,s.jsxs)(`div`,{className:`item-row`,children:[(0,s.jsx)(`input`,{className:`form-input`,value:e.descricao_peca,onChange:e=>{let n=[...p];n[t].descricao_peca=e.target.value,m(n)},placeholder:`DescriÃ§Ã£o da peÃ§a`}),(0,s.jsx)(`input`,{className:`form-input`,type:`number`,min:1,value:e.quantidade,onChange:e=>{let n=[...p];n[t].quantidade=Number(e.target.value),m(n)},style:{width:`70px`}}),p.length>1&&(0,s.jsx)(`button`,{type:`button`,onClick:()=>b(t),style:{color:`#ef4444`,background:`none`,fontSize:`1.1rem`,cursor:`pointer`},children:`âœ•`})]},t))]}),(0,s.jsxs)(`div`,{className:`modal-footer`,children:[(0,s.jsx)(`button`,{type:`button`,className:`btn-secondary`,onClick:t,children:`Cancelar`}),(0,s.jsx)(`button`,{type:`submit`,className:`btn-primary`,disabled:h,children:h?`Enviando...`:`Criar CotaÃ§Ã£o`})]})]})]})})}function p({empresaId:e,onClose:t,onSave:n}){let[r,i]=(0,a.useState)({fornecedor_nome:``,numero_pedido:``,valor_total:0,codigo_rastreio:``,previsao_entrega:``,observacoes:``}),[c,u]=(0,a.useState)(!1),[d,f]=(0,a.useState)(``);return(0,s.jsx)(`div`,{className:`modal-overlay`,onClick:t,children:(0,s.jsxs)(`div`,{className:`modal-content`,onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)(`div`,{className:`modal-header`,children:[(0,s.jsx)(`h2`,{className:`modal-title`,children:`Novo Pedido`}),(0,s.jsx)(`button`,{className:`modal-close`,onClick:t,children:(0,s.jsx)(l,{})})]}),(0,s.jsxs)(`form`,{onSubmit:async t=>{t.preventDefault(),u(!0),f(``);try{await o.criarPedido({...r,empresa_id:e,status:`pendente`}),n()}catch{f(`Erro ao criar pedido.`)}finally{u(!1)}},children:[(0,s.jsxs)(`div`,{className:`modal-body`,children:[d&&(0,s.jsx)(`div`,{className:`error-message`,children:d}),(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`Fornecedor *`}),(0,s.jsx)(`input`,{className:`form-input`,value:r.fornecedor_nome,onChange:e=>i({...r,fornecedor_nome:e.target.value}),required:!0})]}),(0,s.jsxs)(`div`,{className:`form-row`,children:[(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`NÂº Pedido`}),(0,s.jsx)(`input`,{className:`form-input`,value:r.numero_pedido,onChange:e=>i({...r,numero_pedido:e.target.value})})]}),(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`Valor Total (R$)`}),(0,s.jsx)(`input`,{className:`form-input`,type:`number`,step:`0.01`,value:r.valor_total,onChange:e=>i({...r,valor_total:Number(e.target.value)})})]})]}),(0,s.jsxs)(`div`,{className:`form-row`,children:[(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`CÃ³digo Rastreio`}),(0,s.jsx)(`input`,{className:`form-input`,value:r.codigo_rastreio,onChange:e=>i({...r,codigo_rastreio:e.target.value})})]}),(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`PrevisÃ£o Entrega`}),(0,s.jsx)(`input`,{className:`form-input`,type:`date`,value:r.previsao_entrega,onChange:e=>i({...r,previsao_entrega:e.target.value})})]})]}),(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`ObservaÃ§Ãµes`}),(0,s.jsx)(`textarea`,{className:`form-input`,rows:2,value:r.observacoes,onChange:e=>i({...r,observacoes:e.target.value})})]})]}),(0,s.jsxs)(`div`,{className:`modal-footer`,children:[(0,s.jsx)(`button`,{type:`button`,className:`btn-secondary`,onClick:t,children:`Cancelar`}),(0,s.jsx)(`button`,{type:`submit`,className:`btn-primary`,disabled:c,children:c?`Salvando...`:`Criar Pedido`})]})]})]})})}function m({status:e}){let t=[{key:`pendente`,label:`Pendente`},{key:`confirmado`,label:`Confirmado`},{key:`em_transito`,label:`Em TrÃ¢nsito`},{key:`entregue`,label:`Entregue`}],n=t.findIndex(t=>t.key===e);return e===`cancelado`?(0,s.jsx)(`span`,{className:`pedido-status cancelado`,children:`CANCELADO`}):(0,s.jsx)(`div`,{className:`tracking-timeline`,children:t.map((e,r)=>(0,s.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,flex:1},children:[(0,s.jsxs)(`div`,{className:`tracking-step`,children:[(0,s.jsx)(`div`,{className:`tracking-dot ${r<n?`completed`:r===n?`current`:`pending`}`,children:r<n?`âœ“`:r+1}),(0,s.jsx)(`div`,{className:`tracking-label`,children:e.label})]}),r<t.length-1&&(0,s.jsx)(`div`,{className:`tracking-line ${r<n?`completed`:`pending`}`})]},e.key))})}function h(){let{userProfile:e}=i(),[t,n]=(0,a.useState)(`garantias`),[r,l]=(0,a.useState)([]),[h,g]=(0,a.useState)([]),[_,v]=(0,a.useState)([]),[y,b]=(0,a.useState)(!0),[x,S]=(0,a.useState)(!1),[C,w]=(0,a.useState)(!1),[T,E]=(0,a.useState)(!1),D=e?.empresa_id||``,O=async()=>{if(D){b(!0);try{let[e,t,n]=await Promise.all([o.listarGarantias(D),o.listarCotacoes(D),o.listarPedidos(D)]);l(e),g(t),v(n)}catch(e){console.error(e)}finally{b(!1)}}};(0,a.useEffect)(()=>{O()},[D]);let k=e=>new Date(e).toLocaleDateString(`pt-BR`),A=e=>e.toLocaleString(`pt-BR`,{style:`currency`,currency:`BRL`}),j=e=>{let t=new Date(e).getTime()-new Date().getTime();return Math.ceil(t/(1e3*60*60*24))},M=e=>e.status===`vencida`?`expired`:j(e.data_vencimento_garantia)<=30?`expiring`:`active`,N=async(e,t)=>{try{let n={status:t};t===`entregue`&&(n.data_entrega=new Date().toISOString().split(`T`)[0]),await o.atualizarPedido(e,n),O()}catch(e){console.error(e)}};return y?(0,s.jsx)(`div`,{className:`integracao-page`,children:(0,s.jsx)(`div`,{className:`loading-spinner`,children:(0,s.jsx)(`div`,{className:`spinner`})})}):(0,s.jsxs)(`div`,{className:`integracao-page`,children:[(0,s.jsx)(`div`,{className:`page-header`,children:(0,s.jsx)(`h1`,{className:`page-title`,children:`IntegraÃ§Ã£o com Fornecedores`})}),(0,s.jsxs)(`div`,{className:`integracao-tabs`,children:[(0,s.jsx)(`button`,{className:`integracao-tab ${t===`garantias`?`active`:``}`,onClick:()=>n(`garantias`),children:`ðŸ”§ Garantias`}),(0,s.jsx)(`button`,{className:`integracao-tab ${t===`cotacoes`?`active`:``}`,onClick:()=>n(`cotacoes`),children:`ðŸ’° CotaÃ§Ãµes`}),(0,s.jsx)(`button`,{className:`integracao-tab ${t===`pedidos`?`active`:``}`,onClick:()=>n(`pedidos`),children:`ðŸ“¦ Pedidos`})]}),t===`garantias`&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`1rem`},children:[(0,s.jsx)(`h3`,{style:{fontWeight:700,color:`var(--color-gray-700)`},children:`Garantias de Equipamentos`}),(0,s.jsxs)(`button`,{className:`btn-primary`,onClick:()=>S(!0),children:[(0,s.jsx)(c,{}),` Nova Garantia`]})]}),r.length===0?(0,s.jsxs)(`div`,{className:`empty-state`,children:[(0,s.jsx)(`div`,{className:`empty-icon`,children:(0,s.jsx)(u,{})}),(0,s.jsx)(`h3`,{className:`empty-title`,children:`Nenhuma garantia registrada`}),(0,s.jsx)(`p`,{className:`empty-description`,children:`Registre garantias para acompanhar vencimentos e acionar fabricantes.`})]}):r.map(e=>{let t=j(e.data_vencimento_garantia);return(0,s.jsxs)(`div`,{className:`garantia-card ${M(e)}`,children:[(0,s.jsxs)(`div`,{className:`garantia-info`,children:[(0,s.jsxs)(`h4`,{children:[e.fabricante,` â€” `,e.modelo]}),(0,s.jsxs)(`p`,{children:[e.numero_serie&&`S/N: ${e.numero_serie} Â· `,`Vence em `,k(e.data_vencimento_garantia),t>0&&t<=30&&(0,s.jsxs)(`span`,{style:{color:`#f59e0b`,fontWeight:600},children:[` (`,t,` dias restantes âš ï¸)`]}),t<=0&&(0,s.jsx)(`span`,{style:{color:`#dc2626`,fontWeight:600},children:` (vencida)`})]})]}),(0,s.jsx)(`span`,{className:`garantia-badge ${e.status}`,children:e.status})]},e.id)})]}),t===`cotacoes`&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`1rem`},children:[(0,s.jsx)(`h3`,{style:{fontWeight:700,color:`var(--color-gray-700)`},children:`CotaÃ§Ãµes de PeÃ§as`}),(0,s.jsxs)(`button`,{className:`btn-primary`,onClick:()=>w(!0),children:[(0,s.jsx)(c,{}),` Nova CotaÃ§Ã£o`]})]}),h.length===0?(0,s.jsxs)(`div`,{className:`empty-state`,children:[(0,s.jsx)(`div`,{className:`empty-icon`,children:(0,s.jsx)(u,{})}),(0,s.jsx)(`h3`,{className:`empty-title`,children:`Nenhuma cotaÃ§Ã£o`}),(0,s.jsx)(`p`,{className:`empty-description`,children:`Crie cotaÃ§Ãµes para comparar preÃ§os e prazos entre fornecedores.`})]}):h.map(e=>(0,s.jsxs)(`div`,{className:`cotacao-card`,children:[(0,s.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`},children:[(0,s.jsxs)(`div`,{children:[(0,s.jsx)(`div`,{style:{fontWeight:700,fontSize:`1rem`,color:`var(--color-gray-800)`,marginBottom:`0.25rem`},children:e.titulo}),e.descricao&&(0,s.jsx)(`div`,{style:{fontSize:`0.85rem`,color:`#64748b`},children:e.descricao}),(0,s.jsxs)(`div`,{style:{fontSize:`0.78rem`,color:`#94a3b8`,marginTop:`0.5rem`},children:[e.itens?.length||0,` peÃ§a(s) Â· por `,e.solicitante?.nome||`-`,` Â· `,k(e.created_at),e.data_limite&&` Â· Limite: ${k(e.data_limite)}`]})]}),(0,s.jsx)(`span`,{className:`cotacao-status ${e.status}`,children:e.status.replace(`_`,` `)})]}),e.itens&&e.itens.length>0&&(0,s.jsx)(`div`,{style:{marginTop:`0.75rem`,padding:`0.75rem`,background:`#f8fafc`,borderRadius:`8px`},children:e.itens.map(e=>(0,s.jsxs)(`div`,{style:{marginBottom:`0.5rem`},children:[(0,s.jsx)(`span`,{style:{fontWeight:600,fontSize:`0.85rem`},children:e.descricao_peca}),(0,s.jsxs)(`span`,{style:{color:`#94a3b8`,fontSize:`0.8rem`},children:[` Ã— `,e.quantidade,` `,e.unidade]}),e.respostas&&e.respostas.length>0&&(0,s.jsx)(`div`,{style:{display:`flex`,gap:`0.5rem`,marginTop:`0.35rem`,flexWrap:`wrap`},children:e.respostas.map(e=>(0,s.jsxs)(`span`,{style:{padding:`0.2rem 0.6rem`,borderRadius:`6px`,fontSize:`0.75rem`,background:e.selecionado?`#dcfce7`:`#f1f5f9`,border:e.selecionado?`1px solid #22c55e`:`1px solid #e2e8f0`,fontWeight:e.selecionado?700:400},children:[e.fornecedor_nome,`: `,e.preco_unitario?A(e.preco_unitario):`-`,` Â· `,e.prazo_entrega??`?`,` dias`]},e.id))})]},e.id))})]},e.id))]}),t===`pedidos`&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`1rem`},children:[(0,s.jsx)(`h3`,{style:{fontWeight:700,color:`var(--color-gray-700)`},children:`Rastreamento de Pedidos`}),(0,s.jsxs)(`button`,{className:`btn-primary`,onClick:()=>E(!0),children:[(0,s.jsx)(c,{}),` Novo Pedido`]})]}),_.length===0?(0,s.jsxs)(`div`,{className:`empty-state`,children:[(0,s.jsx)(`div`,{className:`empty-icon`,children:(0,s.jsx)(u,{})}),(0,s.jsx)(`h3`,{className:`empty-title`,children:`Nenhum pedido`}),(0,s.jsx)(`p`,{className:`empty-description`,children:`Registre pedidos para acompanhar entregas em tempo real.`})]}):_.map(e=>(0,s.jsxs)(`div`,{className:`pedido-card`,children:[(0,s.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`,marginBottom:`0.5rem`},children:[(0,s.jsxs)(`div`,{children:[(0,s.jsx)(`div`,{style:{fontWeight:700,fontSize:`1rem`,color:`var(--color-gray-800)`},children:e.fornecedor_nome}),(0,s.jsxs)(`div`,{style:{fontSize:`0.82rem`,color:`#64748b`},children:[e.numero_pedido&&`Pedido #${e.numero_pedido} Â· `,A(e.valor_total),e.codigo_rastreio&&` Â· Rastreio: ${e.codigo_rastreio}`]})]}),(0,s.jsx)(`span`,{className:`pedido-status ${e.status}`,children:e.status.replace(`_`,` `)})]}),(0,s.jsx)(m,{status:e.status}),(0,s.jsxs)(`div`,{style:{display:`flex`,gap:`0.75rem`,fontSize:`0.78rem`,color:`#94a3b8`,marginTop:`0.5rem`},children:[(0,s.jsxs)(`span`,{children:[`Criado: `,k(e.created_at)]}),e.previsao_entrega&&(0,s.jsxs)(`span`,{children:[`PrevisÃ£o: `,k(e.previsao_entrega)]}),e.data_entrega&&(0,s.jsxs)(`span`,{style:{color:`#16a34a`},children:[`Entregue: `,k(e.data_entrega)]})]}),e.status!==`entregue`&&e.status!==`cancelado`&&(0,s.jsxs)(`div`,{style:{display:`flex`,gap:`0.5rem`,marginTop:`0.75rem`},children:[e.status===`pendente`&&(0,s.jsx)(`button`,{className:`btn-secondary`,style:{padding:`0.3rem 0.8rem`,fontSize:`0.78rem`},onClick:()=>N(e.id,`confirmado`),children:`âœ… Confirmar`}),e.status===`confirmado`&&(0,s.jsx)(`button`,{className:`btn-secondary`,style:{padding:`0.3rem 0.8rem`,fontSize:`0.78rem`},onClick:()=>N(e.id,`em_transito`),children:`ðŸšš Em TrÃ¢nsito`}),e.status===`em_transito`&&(0,s.jsx)(`button`,{className:`btn-primary`,style:{padding:`0.3rem 0.8rem`,fontSize:`0.78rem`},onClick:()=>N(e.id,`entregue`),children:`ðŸ“¦ Entregue`}),(0,s.jsx)(`button`,{className:`btn-secondary`,style:{padding:`0.3rem 0.8rem`,fontSize:`0.78rem`,color:`#dc2626`},onClick:()=>N(e.id,`cancelado`),children:`Cancelar`})]})]},e.id))]}),x&&(0,s.jsx)(d,{empresaId:D,onClose:()=>S(!1),onSave:()=>{S(!1),O()}}),C&&(0,s.jsx)(f,{empresaId:D,onClose:()=>w(!1),onSave:()=>{w(!1),O()}}),T&&(0,s.jsx)(p,{empresaId:D,onClose:()=>E(!1),onSave:()=>{E(!1),O()}})]})}export{h as IntegracaoPage,h as default};