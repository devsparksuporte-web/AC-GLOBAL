import{c as e,n as t,o as n,r,t as i}from"./index-C9yBzEdM.js";/* empty css                 */var a=e(n(),1);const o={async listarChecklists(e){let{data:n,error:r}=await t.from(`checklists_qualidade`).select(`*, itens:itens_checklist(*, order:ordem)`).eq(`empresa_id`,e).eq(`ativo`,!0).order(`created_at`,{ascending:!1});if(r)throw r;return n||[]},async criarChecklist(e,n){let{data:r,error:i}=await t.from(`checklists_qualidade`).insert({empresa_id:e.empresa_id,titulo:e.titulo,descricao:e.descricao}).select().single();if(i)throw i;if(n.length>0){let e=n.map((e,t)=>({checklist_id:r.id,pergunta:e.pergunta,tipo:e.tipo||`sim_nao`,ordem:t,obrigatorio:e.obrigatorio!==!1})),{error:i}=await t.from(`itens_checklist`).insert(e);if(i)throw i}return r},async excluirChecklist(e){let{error:n}=await t.from(`checklists_qualidade`).update({ativo:!1}).eq(`id`,e);if(n)throw n},async listarRespostas(e){let{data:n,error:r}=await t.from(`respostas_checklist`).select(`*, checklist:checklists_qualidade(titulo), tecnico:perfis!tecnico_id(nome)`).eq(`empresa_id`,e).order(`created_at`,{ascending:!1});if(r)throw r;return n||[]},async enviarRespostas(e){let{data:n,error:r}=await t.from(`respostas_checklist`).insert(e).select().single();if(r)throw r;return n},async listarAuditorias(e){let{data:n,error:r}=await t.from(`auditorias`).select(`*, auditor:perfis!auditor_id(nome)`).eq(`empresa_id`,e).order(`created_at`,{ascending:!1});if(r)throw r;return n||[]},async criarAuditoria(e){let{data:n,error:r}=await t.from(`auditorias`).insert(e).select().single();if(r)throw r;return n},async atualizarAuditoria(e,n){let{data:r,error:i}=await t.from(`auditorias`).update(n).eq(`id`,e).select().single();if(i)throw i;return r},async buscarIndicadores(e){let{data:n,error:r}=await t.from(`indicadores_qualidade`).select(`*`).eq(`empresa_id`,e).order(`periodo`,{ascending:!1}).limit(12);if(r)throw r;return n||[]},async calcularIndicadoresAtuais(e){let n=new Date().toISOString().slice(0,7),[r,i]=await Promise.all([t.from(`respostas_checklist`).select(`nota_geral`).eq(`empresa_id`,e),t.from(`auditorias`).select(`status`).eq(`empresa_id`,e)]),a=r.data||[],o=i.data||[],s=a.length,c=s>0?a.reduce((e,t)=>e+(t.nota_geral||0),0)/s:0,l=o.length,u=o.filter(e=>e.status===`aprovado`).length,d=l>0?u/l*100:0;return{id:``,empresa_id:e,periodo:n,total_servicos:s,total_retrabalho:0,taxa_retrabalho:0,media_satisfacao:Math.round(c*10)/10,tempo_medio_resolucao:0,total_auditorias:l,aprovacoes_auditoria:u,taxa_aprovacao:Math.round(d*10)/10,updated_at:new Date().toISOString()}}};var s=r(),c=()=>(0,s.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,s.jsx)(`line`,{x1:`12`,y1:`5`,x2:`12`,y2:`19`}),(0,s.jsx)(`line`,{x1:`5`,y1:`12`,x2:`19`,y2:`12`})]}),l=()=>(0,s.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,s.jsx)(`line`,{x1:`18`,y1:`6`,x2:`6`,y2:`18`}),(0,s.jsx)(`line`,{x1:`6`,y1:`6`,x2:`18`,y2:`18`})]}),u=()=>(0,s.jsxs)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,s.jsx)(`path`,{d:`M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2`}),(0,s.jsx)(`rect`,{x:`8`,y:`2`,width:`8`,height:`4`,rx:`1`,ry:`1`}),(0,s.jsx)(`path`,{d:`M9 14l2 2 4-4`})]});function d({empresaId:e,onClose:t,onSave:n}){let[r,i]=(0,a.useState)(``),[c,u]=(0,a.useState)(``),[d,f]=(0,a.useState)([{pergunta:``,tipo:`sim_nao`,obrigatorio:!0}]),[p,m]=(0,a.useState)(!1),[h,g]=(0,a.useState)(``),_=()=>f([...d,{pergunta:``,tipo:`sim_nao`,obrigatorio:!0}]),v=e=>f(d.filter((t,n)=>n!==e)),y=(e,t,n)=>{let r=[...d];r[e]={...r[e],[t]:n},f(r)};return(0,s.jsx)(`div`,{className:`modal-overlay`,onClick:t,children:(0,s.jsxs)(`div`,{className:`modal-content`,onClick:e=>e.stopPropagation(),style:{maxWidth:`600px`},children:[(0,s.jsxs)(`div`,{className:`modal-header`,children:[(0,s.jsx)(`h2`,{className:`modal-title`,children:`Novo Checklist de Qualidade`}),(0,s.jsx)(`button`,{className:`modal-close`,onClick:t,children:(0,s.jsx)(l,{})})]}),(0,s.jsxs)(`form`,{onSubmit:async t=>{if(t.preventDefault(),d.some(e=>!e.pergunta.trim())){g(`Preencha todas as perguntas.`);return}m(!0),g(``);try{await o.criarChecklist({empresa_id:e,titulo:r,descricao:c},d),n()}catch{g(`Erro ao criar checklist.`)}finally{m(!1)}},children:[(0,s.jsxs)(`div`,{className:`modal-body`,children:[h&&(0,s.jsx)(`div`,{className:`error-message`,children:h}),(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`TÃ­tulo *`}),(0,s.jsx)(`input`,{className:`form-input`,value:r,onChange:e=>i(e.target.value),placeholder:`Ex: Checklist PÃ³s-InstalaÃ§Ã£o`,required:!0})]}),(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`DescriÃ§Ã£o`}),(0,s.jsx)(`input`,{className:`form-input`,value:c,onChange:e=>u(e.target.value),placeholder:`Breve descriÃ§Ã£o do checklist`})]}),(0,s.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`0.75rem`},children:[(0,s.jsx)(`label`,{className:`form-label`,style:{margin:0},children:`Itens do Checklist`}),(0,s.jsx)(`button`,{type:`button`,className:`btn-secondary`,onClick:_,style:{padding:`0.3rem 0.8rem`,fontSize:`0.8rem`},children:`+ Pergunta`})]}),d.map((e,t)=>(0,s.jsxs)(`div`,{style:{display:`flex`,gap:`0.5rem`,alignItems:`center`,marginBottom:`0.5rem`},children:[(0,s.jsx)(`input`,{className:`form-input`,style:{flex:1},value:e.pergunta,onChange:e=>y(t,`pergunta`,e.target.value),placeholder:`Pergunta ${t+1}`}),(0,s.jsxs)(`select`,{className:`form-select`,style:{width:`120px`},value:e.tipo,onChange:e=>y(t,`tipo`,e.target.value),children:[(0,s.jsx)(`option`,{value:`sim_nao`,children:`Sim/NÃ£o`}),(0,s.jsx)(`option`,{value:`nota`,children:`Nota 1-5`}),(0,s.jsx)(`option`,{value:`texto`,children:`Texto`})]}),d.length>1&&(0,s.jsx)(`button`,{type:`button`,className:`btn-icon danger`,onClick:()=>v(t),style:{flexShrink:0},children:`âœ•`})]},t))]}),(0,s.jsxs)(`div`,{className:`modal-footer`,children:[(0,s.jsx)(`button`,{type:`button`,className:`btn-secondary`,onClick:t,children:`Cancelar`}),(0,s.jsx)(`button`,{type:`submit`,className:`btn-primary`,disabled:p,children:p?`Salvando...`:`Criar Checklist`})]})]})]})})}function f({checklist:e,empresaId:t,onClose:n,onSave:r}){let{userProfile:c}=i(),[u,d]=(0,a.useState)({}),[f,p]=(0,a.useState)(``),[m,h]=(0,a.useState)(!1),[g,_]=(0,a.useState)(``),v=(e,t)=>{d(n=>({...n,[e]:t}))};return(0,s.jsx)(`div`,{className:`modal-overlay`,onClick:n,children:(0,s.jsxs)(`div`,{className:`modal-content`,onClick:e=>e.stopPropagation(),style:{maxWidth:`600px`},children:[(0,s.jsxs)(`div`,{className:`modal-header`,children:[(0,s.jsxs)(`h2`,{className:`modal-title`,children:[`ðŸ“‹ `,e.titulo]}),(0,s.jsx)(`button`,{className:`modal-close`,onClick:n,children:(0,s.jsx)(l,{})})]}),(0,s.jsxs)(`form`,{onSubmit:async n=>{n.preventDefault(),h(!0),_(``);try{let n=e.itens||[],i=n.map(e=>({item_id:e.id,pergunta:e.pergunta,tipo:e.tipo,resposta:u[e.id]??``,observacao:``})),a=0,s=n.filter(e=>e.tipo===`nota`),l=n.filter(e=>e.tipo===`sim_nao`);s.length>0?a=s.reduce((e,t)=>e+(Number(u[t.id])||0),0)/s.length:l.length>0&&(a=l.filter(e=>u[e.id]===!0).length/l.length*5),await o.enviarRespostas({empresa_id:t,checklist_id:e.id,tecnico_id:c?.id,respostas:i,nota_geral:Math.round(a*10)/10,observacoes:f}),r()}catch{_(`Erro ao enviar respostas.`)}finally{h(!1)}},children:[(0,s.jsxs)(`div`,{className:`modal-body`,children:[g&&(0,s.jsx)(`div`,{className:`error-message`,children:g}),e.descricao&&(0,s.jsx)(`p`,{style:{fontSize:`0.85rem`,color:`#64748b`,marginBottom:`1rem`},children:e.descricao}),(e.itens||[]).map(e=>(0,s.jsxs)(`div`,{className:`quality-fill-item`,children:[(0,s.jsxs)(`div`,{className:`quality-fill-question`,children:[e.pergunta,` `,e.obrigatorio&&(0,s.jsx)(`span`,{style:{color:`#ef4444`},children:`*`})]}),e.tipo===`sim_nao`&&(0,s.jsxs)(`div`,{className:`quality-fill-options`,children:[(0,s.jsx)(`button`,{type:`button`,className:`quality-fill-option ${u[e.id]===!0?`selected`:``}`,onClick:()=>v(e.id,!0),children:`âœ… Sim`}),(0,s.jsx)(`button`,{type:`button`,className:`quality-fill-option ${u[e.id]===!1?`selected`:``}`,onClick:()=>v(e.id,!1),children:`âŒ NÃ£o`})]}),e.tipo===`nota`&&(0,s.jsx)(`div`,{className:`quality-stars`,children:[1,2,3,4,5].map(t=>(0,s.jsx)(`span`,{className:`quality-star`,onClick:()=>v(e.id,t),style:{color:u[e.id]>=t?`#f59e0b`:`#d1d5db`},children:`â˜…`},t))}),e.tipo===`texto`&&(0,s.jsx)(`textarea`,{className:`form-input`,rows:2,value:u[e.id]||``,onChange:t=>v(e.id,t.target.value),placeholder:`Sua resposta...`})]},e.id)),(0,s.jsxs)(`div`,{className:`form-group`,style:{marginTop:`1rem`},children:[(0,s.jsx)(`label`,{className:`form-label`,children:`ObservaÃ§Ãµes Gerais`}),(0,s.jsx)(`textarea`,{className:`form-input`,rows:2,value:f,onChange:e=>p(e.target.value),placeholder:`ComentÃ¡rios adicionais...`})]})]}),(0,s.jsxs)(`div`,{className:`modal-footer`,children:[(0,s.jsx)(`button`,{type:`button`,className:`btn-secondary`,onClick:n,children:`Cancelar`}),(0,s.jsx)(`button`,{type:`submit`,className:`btn-primary`,disabled:m,children:m?`Enviando...`:`Enviar Checklist`})]})]})]})})}function p({empresaId:e,onClose:t,onSave:n}){let{userProfile:r}=i(),[c,u]=(0,a.useState)(0),[d,f]=(0,a.useState)(``),[p,m]=(0,a.useState)(`aprovado`),[h,g]=(0,a.useState)(!1),[_,v]=(0,a.useState)(``);return(0,s.jsx)(`div`,{className:`modal-overlay`,onClick:t,children:(0,s.jsxs)(`div`,{className:`modal-content`,onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)(`div`,{className:`modal-header`,children:[(0,s.jsx)(`h2`,{className:`modal-title`,children:`Nova Auditoria`}),(0,s.jsx)(`button`,{className:`modal-close`,onClick:t,children:(0,s.jsx)(l,{})})]}),(0,s.jsxs)(`form`,{onSubmit:async t=>{t.preventDefault(),g(!0),v(``);try{await o.criarAuditoria({empresa_id:e,auditor_id:r?.id,status:p,nota:c,parecer:d}),n()}catch{v(`Erro ao registrar auditoria.`)}finally{g(!1)}},children:[(0,s.jsxs)(`div`,{className:`modal-body`,children:[_&&(0,s.jsx)(`div`,{className:`error-message`,children:_}),(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`Nota (0-5)`}),(0,s.jsx)(`div`,{className:`quality-stars`,children:[1,2,3,4,5].map(e=>(0,s.jsx)(`span`,{className:`quality-star`,onClick:()=>u(e),style:{color:c>=e?`#f59e0b`:`#d1d5db`},children:`â˜…`},e))})]}),(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`Resultado`}),(0,s.jsxs)(`select`,{className:`form-select`,value:p,onChange:e=>m(e.target.value),children:[(0,s.jsx)(`option`,{value:`aprovado`,children:`âœ… Aprovado`}),(0,s.jsx)(`option`,{value:`reprovado`,children:`âŒ Reprovado`}),(0,s.jsx)(`option`,{value:`observacao`,children:`âš ï¸ Com ObservaÃ§Ã£o`})]})]}),(0,s.jsxs)(`div`,{className:`form-group`,children:[(0,s.jsx)(`label`,{className:`form-label`,children:`Parecer / ObservaÃ§Ãµes`}),(0,s.jsx)(`textarea`,{className:`form-input`,rows:3,value:d,onChange:e=>f(e.target.value),placeholder:`Descreva sua avaliaÃ§Ã£o do serviÃ§o...`})]})]}),(0,s.jsxs)(`div`,{className:`modal-footer`,children:[(0,s.jsx)(`button`,{type:`button`,className:`btn-secondary`,onClick:t,children:`Cancelar`}),(0,s.jsx)(`button`,{type:`submit`,className:`btn-primary`,disabled:h,children:h?`Salvando...`:`Registrar Auditoria`})]})]})]})})}function m(){let{userProfile:e}=i(),[t,n]=(0,a.useState)(`checklists`),[r,l]=(0,a.useState)([]),[m,h]=(0,a.useState)([]),[g,_]=(0,a.useState)([]),[v,y]=(0,a.useState)(null),[b,x]=(0,a.useState)(!0),[S,C]=(0,a.useState)(!1),[w,T]=(0,a.useState)(null),[E,D]=(0,a.useState)(!1),O=e?.empresa_id||``,k=async()=>{if(O){x(!0);try{let[e,t,n]=await Promise.all([o.listarChecklists(O),o.listarRespostas(O),o.listarAuditorias(O)]);l(e),h(t),_(n),y(await o.calcularIndicadoresAtuais(O))}catch(e){console.error(`Erro ao carregar dados de qualidade:`,e)}finally{x(!1)}}};(0,a.useEffect)(()=>{k()},[O]);let A=e=>new Date(e).toLocaleDateString(`pt-BR`);return b?(0,s.jsx)(`div`,{className:`quality-page`,children:(0,s.jsx)(`div`,{className:`loading-spinner`,children:(0,s.jsx)(`div`,{className:`spinner`})})}):(0,s.jsxs)(`div`,{className:`quality-page`,children:[(0,s.jsx)(`div`,{className:`page-header`,children:(0,s.jsx)(`h1`,{className:`page-title`,children:`GestÃ£o de Qualidade`})}),(0,s.jsxs)(`div`,{className:`quality-tabs`,children:[(0,s.jsx)(`button`,{className:`quality-tab ${t===`checklists`?`active`:``}`,onClick:()=>n(`checklists`),children:`ðŸ“‹ Checklists`}),(0,s.jsx)(`button`,{className:`quality-tab ${t===`auditorias`?`active`:``}`,onClick:()=>n(`auditorias`),children:`ðŸ” Auditorias`}),(0,s.jsx)(`button`,{className:`quality-tab ${t===`indicadores`?`active`:``}`,onClick:()=>n(`indicadores`),children:`ðŸ“Š Indicadores`})]}),t===`checklists`&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`1rem`},children:[(0,s.jsx)(`h3`,{style:{fontWeight:700,color:`var(--color-gray-700)`},children:`Templates de Checklist`}),(0,s.jsxs)(`button`,{className:`btn-primary`,onClick:()=>C(!0),children:[(0,s.jsx)(c,{}),` Novo Checklist`]})]}),r.length===0?(0,s.jsxs)(`div`,{className:`empty-state`,children:[(0,s.jsx)(`div`,{className:`empty-icon`,children:(0,s.jsx)(u,{})}),(0,s.jsx)(`h3`,{className:`empty-title`,children:`Nenhum checklist criado`}),(0,s.jsx)(`p`,{className:`empty-description`,children:`Crie templates de checklist para que os tÃ©cnicos preencham apÃ³s cada serviÃ§o.`})]}):r.map(e=>(0,s.jsxs)(`div`,{className:`quality-checklist-card`,children:[(0,s.jsx)(`div`,{className:`quality-checklist-title`,children:e.titulo}),e.descricao&&(0,s.jsx)(`div`,{className:`quality-checklist-desc`,children:e.descricao}),(0,s.jsxs)(`div`,{className:`quality-checklist-items`,children:[e.itens?.length||0,` perguntas`]}),(0,s.jsxs)(`div`,{className:`quality-checklist-actions`,children:[(0,s.jsx)(`button`,{className:`btn-primary`,style:{padding:`0.35rem 1rem`,fontSize:`0.8rem`},onClick:()=>T(e),children:`Preencher`}),(0,s.jsx)(`button`,{className:`btn-secondary`,style:{padding:`0.35rem 1rem`,fontSize:`0.8rem`},onClick:()=>o.excluirChecklist(e.id).then(k),children:`Desativar`})]})]},e.id)),m.length>0&&(0,s.jsxs)(`div`,{style:{marginTop:`2rem`},children:[(0,s.jsx)(`h3`,{style:{fontWeight:700,color:`var(--color-gray-700)`,marginBottom:`1rem`},children:`Respostas Recentes`}),(0,s.jsx)(`div`,{className:`table-container`,children:(0,s.jsxs)(`table`,{className:`data-table`,children:[(0,s.jsx)(`thead`,{children:(0,s.jsxs)(`tr`,{children:[(0,s.jsx)(`th`,{children:`Checklist`}),(0,s.jsx)(`th`,{children:`TÃ©cnico`}),(0,s.jsx)(`th`,{children:`Nota`}),(0,s.jsx)(`th`,{children:`Data`})]})}),(0,s.jsx)(`tbody`,{children:m.slice(0,10).map(e=>(0,s.jsxs)(`tr`,{children:[(0,s.jsx)(`td`,{style:{fontWeight:600},children:e.checklist?.titulo||`-`}),(0,s.jsx)(`td`,{children:e.tecnico?.nome||`-`}),(0,s.jsx)(`td`,{children:(0,s.jsxs)(`span`,{style:{fontWeight:700,color:e.nota_geral>=4?`#16a34a`:e.nota_geral>=2.5?`#d97706`:`#dc2626`},children:[e.nota_geral.toFixed(1),` / 5.0`]})}),(0,s.jsx)(`td`,{children:A(e.created_at)})]},e.id))})]})})]})]}),t===`auditorias`&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`1rem`},children:[(0,s.jsx)(`h3`,{style:{fontWeight:700,color:`var(--color-gray-700)`},children:`Auditorias Remotas`}),(0,s.jsxs)(`button`,{className:`btn-primary`,onClick:()=>D(!0),children:[(0,s.jsx)(c,{}),` Nova Auditoria`]})]}),g.length===0?(0,s.jsxs)(`div`,{className:`empty-state`,children:[(0,s.jsx)(`div`,{className:`empty-icon`,children:(0,s.jsx)(u,{})}),(0,s.jsx)(`h3`,{className:`empty-title`,children:`Nenhuma auditoria registrada`}),(0,s.jsx)(`p`,{className:`empty-description`,children:`Supervisores podem revisar serviÃ§os por amostragem para garantir a qualidade.`})]}):(0,s.jsx)(`div`,{className:`table-container`,children:(0,s.jsxs)(`table`,{className:`data-table`,children:[(0,s.jsx)(`thead`,{children:(0,s.jsxs)(`tr`,{children:[(0,s.jsx)(`th`,{children:`Data`}),(0,s.jsx)(`th`,{children:`Auditor`}),(0,s.jsx)(`th`,{children:`Nota`}),(0,s.jsx)(`th`,{children:`Status`}),(0,s.jsx)(`th`,{children:`Parecer`})]})}),(0,s.jsx)(`tbody`,{children:g.map(e=>(0,s.jsxs)(`tr`,{children:[(0,s.jsx)(`td`,{children:A(e.created_at)}),(0,s.jsx)(`td`,{style:{fontWeight:600},children:e.auditor?.nome||`-`}),(0,s.jsx)(`td`,{children:e.nota?(0,s.jsx)(`span`,{style:{fontWeight:700,color:e.nota>=4?`#16a34a`:e.nota>=2.5?`#d97706`:`#dc2626`},children:e.nota.toFixed(1)}):`-`}),(0,s.jsx)(`td`,{children:(0,s.jsx)(`span`,{className:`audit-status ${e.status}`,children:e.status})}),(0,s.jsx)(`td`,{style:{maxWidth:`300px`,fontSize:`0.85rem`,color:`#64748b`},children:e.parecer||`-`})]},e.id))})]})})]}),t===`indicadores`&&v&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(`div`,{className:`quality-metrics`,children:[(0,s.jsxs)(`div`,{className:`quality-metric-card`,children:[(0,s.jsx)(`div`,{className:`quality-metric-icon`,children:`ðŸ“Š`}),(0,s.jsx)(`div`,{className:`quality-metric-value blue`,children:v.total_servicos}),(0,s.jsx)(`div`,{className:`quality-metric-label`,children:`ServiÃ§os Avaliados`})]}),(0,s.jsxs)(`div`,{className:`quality-metric-card`,children:[(0,s.jsx)(`div`,{className:`quality-metric-icon`,children:`â­`}),(0,s.jsx)(`div`,{className:`quality-metric-value ${v.media_satisfacao>=4?`green`:v.media_satisfacao>=2.5?`yellow`:`red`}`,children:v.media_satisfacao.toFixed(1)}),(0,s.jsx)(`div`,{className:`quality-metric-label`,children:`SatisfaÃ§Ã£o MÃ©dia`})]}),(0,s.jsxs)(`div`,{className:`quality-metric-card`,children:[(0,s.jsx)(`div`,{className:`quality-metric-icon`,children:`ðŸ”„`}),(0,s.jsxs)(`div`,{className:`quality-metric-value ${v.taxa_retrabalho<=5?`green`:v.taxa_retrabalho<=15?`yellow`:`red`}`,children:[v.taxa_retrabalho.toFixed(1),`%`]}),(0,s.jsx)(`div`,{className:`quality-metric-label`,children:`Taxa de Retrabalho`})]}),(0,s.jsxs)(`div`,{className:`quality-metric-card`,children:[(0,s.jsx)(`div`,{className:`quality-metric-icon`,children:`âœ…`}),(0,s.jsxs)(`div`,{className:`quality-metric-value ${v.taxa_aprovacao>=80?`green`:v.taxa_aprovacao>=50?`yellow`:`red`}`,children:[v.taxa_aprovacao.toFixed(1),`%`]}),(0,s.jsx)(`div`,{className:`quality-metric-label`,children:`AprovaÃ§Ã£o em Auditoria`})]}),(0,s.jsxs)(`div`,{className:`quality-metric-card`,children:[(0,s.jsx)(`div`,{className:`quality-metric-icon`,children:`ðŸ”`}),(0,s.jsx)(`div`,{className:`quality-metric-value blue`,children:v.total_auditorias}),(0,s.jsx)(`div`,{className:`quality-metric-label`,children:`Total de Auditorias`})]}),(0,s.jsxs)(`div`,{className:`quality-metric-card`,children:[(0,s.jsx)(`div`,{className:`quality-metric-icon`,children:`â±ï¸`}),(0,s.jsxs)(`div`,{className:`quality-metric-value blue`,children:[v.tempo_medio_resolucao.toFixed(1),`h`]}),(0,s.jsx)(`div`,{className:`quality-metric-label`,children:`Tempo MÃ©dio ResoluÃ§Ã£o`})]})]}),(0,s.jsxs)(`div`,{style:{background:`white`,borderRadius:`var(--radius-xl)`,padding:`1.5rem`,border:`1px solid var(--color-gray-100)`,boxShadow:`var(--shadow-sm)`},children:[(0,s.jsxs)(`h3`,{style:{fontWeight:700,color:`var(--color-gray-700)`,marginBottom:`1rem`},children:[`ðŸ“ˆ AnÃ¡lise do PerÃ­odo: `,v.periodo]}),(0,s.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`1.5rem`},children:[(0,s.jsxs)(`div`,{children:[(0,s.jsx)(`p`,{style:{fontSize:`0.85rem`,color:`#64748b`,marginBottom:`0.5rem`},children:`ServiÃ§os avaliados vs Auditorias`}),(0,s.jsxs)(`div`,{style:{display:`flex`,gap:`0.5rem`,alignItems:`baseline`},children:[(0,s.jsx)(`span`,{style:{fontSize:`2rem`,fontWeight:800,color:`#2563eb`},children:v.total_servicos}),(0,s.jsx)(`span`,{style:{color:`#94a3b8`},children:`serviÃ§os /`}),(0,s.jsx)(`span`,{style:{fontSize:`2rem`,fontWeight:800,color:`#7c3aed`},children:v.total_auditorias}),(0,s.jsx)(`span`,{style:{color:`#94a3b8`},children:`auditorias`})]})]}),(0,s.jsxs)(`div`,{children:[(0,s.jsx)(`p`,{style:{fontSize:`0.85rem`,color:`#64748b`,marginBottom:`0.5rem`},children:`AprovaÃ§Ãµes em Auditoria`}),(0,s.jsxs)(`div`,{style:{display:`flex`,gap:`0.5rem`,alignItems:`baseline`},children:[(0,s.jsx)(`span`,{style:{fontSize:`2rem`,fontWeight:800,color:`#16a34a`},children:v.aprovacoes_auditoria}),(0,s.jsxs)(`span`,{style:{color:`#94a3b8`},children:[`de `,v.total_auditorias,` (`,v.taxa_aprovacao.toFixed(0),`%)`]})]})]})]})]})]}),S&&(0,s.jsx)(d,{empresaId:O,onClose:()=>C(!1),onSave:()=>{C(!1),k()}}),w&&(0,s.jsx)(f,{checklist:w,empresaId:O,onClose:()=>T(null),onSave:()=>{T(null),k()}}),E&&(0,s.jsx)(p,{empresaId:O,onClose:()=>D(!1),onSave:()=>{D(!1),k()}})]})}export{m as QualidadePage,m as default};